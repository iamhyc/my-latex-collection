\section{System Model}
%----------------------------------------------------------------------------------------%
\subsection{Network Model}
We consider an edge computing system with $K$ Access Points (APs) and $M$ edge servers, which are connected in a network as illustrated in Fig.\ref{fig:system}.
The sets of APs and edge servers are denoted as $\apSet \define \set{1,\dots,K}$ and $\esSet \define \set{1,\dots,M}$, respectively.
Without loss of generality, it is assumed that there are $J$ types of computation jobs supported in this system, which are denoted via the set $\mathcal{J} \define \set{1,\dots,J}$.
Each AP collects the computation jobs from the mobile users within its coverage, and makes decision on the processing edge servers for each job type from the set $\esSet$.
It is assumed that the $k$-th AP only dispatches the computation jobs to the feasible edge servers, e.g. the edge servers within a certain number of hops.
Let $\esSet_{k} \subseteq \esSet$ be the set of edge servers, which can compute the jobs from the $k$-th AP and $\apSet_{m}$ be the set of APs, which may upload jobs to the $m$-th edge server.
We refer to $\esSet_{k}$ as the \emph{candidate server set} of the $k$-th AP, and $\apSet_{m}$ as the \emph{candidate AP set} of the $m$-th edge server ($\forall k\in\apSet, m\in\esSet$).
% As illustrated in Fig.\ref{fig:conflict},
Different APs may have different candidate servers according to their locations in the network.
For example, it is possible that $\esSet_{k} \neq \esSet_{k'}$ and $\esSet_{k} \cap \esSet_{k'} \neq \emptyset$ when $k \neq k' \in \apSet$.
\accept{
    In this edge computing network, each AP decentralized makes job dispatching decision faciliated by inforamtion sharing from other APs and edge servers.
}
Specifically, each AP and edge server periodically broadcast their state information (e.g. edge server dispatching choice for each job type, list of jobs being uploaded from APs to edge servers, computing queue length and etc.), and one AP updates its strategy on job dispatching when receiving the broadcast state information.
In this paper, we shall optimize the job dispatching strategy at APs with part of the broadcast information and random broadcast latency.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.80\textwidth]{system-model.pdf}
    \caption{The Illustration of MEC System Model}
    \label{fig:system}
\end{figure}

%NOTE: [job space support and arrival process]
The time axis is organized by time slots.
The job arrivals in each time slot on each AP are modelled via independent Bernoulli distributions.
Specifically, the arrivals of the $j$-th job type at the $k$-th AP in different time slots are independent and identically distributed (i.i.d) Bernoulli random variables, and the arrival probability is denoted as $\lambda_{k,j}$ ($\forall k\in\apSet, j\in\jSpace$).
Let $A_{k,j}(t) \in \set{0,1}$ represents the event of job arrival, where $A_{k,j}(t)=1$ means one job of the $j$-th job type arrives on the $k$-th at the $t$-th time slot, and $A_{k,j}(t)=0$ means other wise.
Hence,
\begin{align}
    \Pr\{ A_{k,j}(t) = 1 \} = \lambda_{k,j}, \forall t,k\in\apSet,j\in\jSpace
\end{align}

%NOTE: [uploading process]
Each AP then immediately dispatches each type of received jobs to one edge server.
Different types of jobs may have different distributions on the input data size.
Moreover, due to the random traffic in the network, the job uploading from one AP to one edge server consumes a random number of time slots.
It's assumed that the distributions of uploading time are independent between any two uploading jobs.
Hence, we denote $\mathcal{U}_{k,m,j}$ as the uploading time for the $j$-th job type uploading from the $k$-th AP to the $m$-th edge server following some distribution with support $\set{1, \dots, \Xi}$, where $\Xi$ denotes the maximum uploading time ($\forall k\in\apSet, m\in\esSet, j\in\jSpace$).
In practice, the distribution of uploading latency may not be known to the APs or edge servers in advance.

%NOTE: [processing process]
There are $J$ virtual machines (VMs) running parallel on each edge server for the computation of $J$ job types, respectively.
For each job type, the uploaded jobs are computed in a First-Come-First-Serve (FCFS) manner.
Hence, a processing queue with maximum $L_{max}$ jobs is established for each VM.
The arrival jobs will be discarded when the processing queue is full.
Furthermore, we adopt the \emph{unrelated machines assumption} in \cite{tan-online} for job processing on edge servers.
Specifically, it is assumed that the computation time of different job types on different edge servers follows the memory-less Geometric distribution (with the unit of time slot) with different expectations.
Let $C_{m,j} \sim \mathbb{G}(1/c_{m,j})$ be the computation time distribution of the $j$-th job type on the $m$-th edge server, where $c_{m,j}$ is the expectation.
Hence, the probability mass function (PMF) of $C_{m,j}$ is given by:
\begin{align}
    f_{m,j}(k) \define (1-\frac{1}{c_{m,j}})^{k-1} \frac{1}{c_{m,j}}.
\end{align}
%----------------------------------------------------------------------------------------%

\subsection{Periodic Broadcast of State Information}
In order to facilitate cooperative dispatching for the APs, it is assumed that all the APs and edge servers will broadcast their \emph{local state information} (LSI) every $t_B$ time slots.
% as depicted in Fig.\ref{fig:brd-timeline}.
We shall refer to every $t_B$ time slots as a broadcast interval.
At the beginning of each broadcast interval (say the $t$-th broadcast interval), the LSI for AP and edge server is defined as follows, respectively.

%NOTE: State and Broadcast Information for AP
\begin{definition}[Local State Information of AP]
    One AP shall maintain LSI about the number of jobs in uploading, and the dispatching choice on edge servers for each job type.
    Specifically, at the $n$-th time slot in the $t$-th interval, the number of the $j$-th type job being uploaded $\xi$ time slots ago from the $k$-th AP to the $m$-th edge server is denoted as
    $R^{(k)}_{m,j,\xi}({t,n})$;
    at the $t$-th broadcast time slot, the dispatching choice of the $k$-th AP for proceesing of the $j$-th job type is denoted as
    $\omega_{k,j}(t) \in \esSet_{k}$ ($\forall k\in\apSet, m\in\esSet, j\in\jSpace, \xi\in(0,\Xi]$).
    Hence, the LSI of the $k$-th AP at the $t$-th broadcast is given as follows.
    \begin{align}
        \mathcal{R}_{k}(t) \define \set{\vec{R}^{(k)}_{m,j}(t,0), \set{\omega_{k,j}(t)|\forall j\in\jSpace} | \forall m\in\esSet_{k}, j\in\jSpace},
    \end{align}
    where
    $\vec{R}^{(k)}_{m,j}(t,0) \define ( R^{(k)}_{m,j,0}(t,0), \dots, R^{(k)}_{m,j,\Xi}(t,0) )$
    denotes the vector of random variables.
\end{definition}

%NOTE: State and Broadcast Information for ES
\begin{definition}[Local State Information of Edge Servers]
    One edge server shall maintain LSI about the computing queue status for each VM.
    Specifically, at the $n$ time slot in the $t$-th interval, the $m$-th edge server have $Q_{m,j}({t,n})$ denote the pending number of the $j$-th type job ($\forall m\in\esSet, j\in\jSpace$).
    Hence, the LSI of the $m$-th edge server at the $t$-th broadcast is defined as follows.
    \begin{align}
        \mathcal{Q}_{m}(t) \define \set{Q_{m,j}(t, 0) | \forall j\in\jSpace}.
    \end{align}
\end{definition}

We refer to \emph{global state information} (GSI) as the composition of all the broadcast information from all APs and edge servers in one broadcast and the definition is given as follows.
\begin{definition}[Global State Information]
    \begin{align}
        \Obsv^{\dagger}(t) \define
            \Brace{
                \mathcal{R}_{k}(t), \mathcal{Q}_{m}(t) | \forall k\in\apSet, m\in\esSet
            },
    \end{align}
    which is composed of all the broadcast information from all APs and edge servers at the $t$-th broadcast time slot.
\end{definition}

\fixit{
    \begin{figure}[tp]
        \centering
        \includegraphics[width=0.80\textwidth]{images/conflict.pdf}
        \caption{The Example Illustration of Conflict Set and Partial Broadcast Information}
        \label{fig:conflict}
    \end{figure}
    As the edge computing network resides in MAN, the transmission latency of LSI is not negligible.
    In an extensive edge computing network residing in MAN, it may not be feasible for each AP to collect the LSI from all other APs and edge servers.
    % to improve the system efficiency, we adapt OSI; (why it's enough for AP to make decision only with OSI?)
}

%NOTE: Conflict of AP set and partial information definition
Hence, we first define the \emph{conflict AP set} as follows.
\begin{definition}[Conflict AP Set]
    \begin{align}
        \ccSet_{k} \define \bigcup_{m\in\esSet_{k}} \apSet_{m}.
        % \ccSet_{k} \define \set{\forall k' \neq k\in\apSet|\esSet_{k'} \cap \esSet_{k} \neq \emptyset}
    \end{align}
    The \emph{conflict AP set} indicates that the subset of APs whose LSI could affect the decision making for the $k$-th AP.
\end{definition}

\begin{figure}[t]
    \centering
    \includegraphics[width=0.80\textwidth]{brd-timeline.pdf}
    \caption{The timeline illustration of LSI broadcast with 2 APs and 1 edge server.}
    \label{fig:brd-timeline}
\end{figure}

It is assumed that each AP can only collect the LSI from the APs in its \emph{conflict AP set} and edge servers from its \emph{candidate server set}.
Hence, we refer to the reduced state information required as \emph{observed state information} (OSI) and the definition of the $k$-th AP is given as follows ($\forall k\in\apSet$).
\begin{definition}[Observed State Information]
    \begin{align}
        \Obsv_{k} &= \set{\mathcal{R}_{k'} | \forall k'\in\ccSet_{k}}
                        \cup \set{\mathcal{Q}_{m} | \forall m\in\esSet_{k}},
    \end{align}
\end{definition}

One AP will update its dispatching decision after the reception of its OSI, while the others will keep their previous policies.
We denote the individual dispatching policy of the $k$-th AP ($\forall k\in\apSet$) based on its OSI $\Obsv_{k}(t)$ as follows.
\begin{align}
    &\Omega_{k}(\Obsv_{k}(t)) \define \set{\omega_{k,j}(t+1)|\forall m\in\esSet, j\in\jSpace}.
    \label{def_action}
\end{align}

It is assumed that the $k$-th AP is able to collect the GSI $D_{k}(t)$ time slots later after the broadcast of the $t$-th broadcast interval, where $D_{k}(t)$ is a random variable follows some distribution.
We refer to $D_{k}(t)$ as the \brlatency of the $k$-th AP for the $t$-th broadcast, which is always smaller compared with the broadcast interval, i.e. $t_B > \hat{D}_{k}$ where $\hat{D}_{k}$ is the upper bound for $D_{k}(t)$ ($\forall k\in\apSet$).
Hence, $D_{k}(t)$ follows some distribution with support $\set{1,\dots,t_B}$, i.e. the broadcast interval $t_B$ is set that the $k$-th AP ($\forall k\in\apSet$) could receive the complete OSI before the start of next broadcast interval.

\fixit{
    However, due to the randomness of \brlatency~which follows independent distribution of each AP, it's impossible to for any AP to obtain timely \brlatency~information of other APs in one broadcast interval.
    Thus, the $k$-th AP could not determine the new policy in a fully cooperative way, while other APs also change their policies at their time slots receiving the GSI.

    In the next section, we will first formulate the joint optimization of dispatching decisions of all APs under standard MDP framework.
    From the global perspective of the edge computing system, the \brlatency~$D_{k}$(t) ($\forall k\in\apSet$) is always available to a centralized agent.
    Then we leverage the Bellman's equation in this problem formulation, and come up with a practical decentralized solution in the algorithm section. 
    Furthermore, with the help of algorithm design we could prove that our improved new policy is with analytical performance bound under MDP framework.
}

%----------------------------------------------------------------------------------------%
\delete{v7}{
    One simple example is given as follows.
    \begin{example}
        As depicted in \ref{fig:conflict}, there are 3 APs and 3 edge servers in the system.
        The \emph{candidate set} for each AP is denoted as: $\esSet_{1}=\set{1}, \esSet_{2}=\set{1,2}, \esSet_{3}=\set{2,3}$, respectively.
        The \emph{conflict set} for each AP is denoted as: $\ccSet_{1}=\set{1,2}, \ccSet_{2}=\set{1,2,3}, \ccSet_{3}=\set{2,3}$.
        And the partial information required for each AP is denoted as follows.
        \begin{align*}
            \Obsv_{1} &= \set{ \mathcal{R}_{2} } \cup \set{ \mathcal{Q}_{1} }
            \\
            \Obsv_{3} &= \set{ \mathcal{R}_{2} } \cup \set{ \mathcal{Q}_{2}, \mathcal{Q}_{3} }
        \end{align*}
        % And we note that
    \end{example}
}
%----------------------------------------------------------------------------------------%